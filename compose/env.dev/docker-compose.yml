version: '2.1'

services:
  rabbit:
    image: rabbit:latest
    env_file: rabbit.env
    expose: 
      - "5672"
  stacosys:
    image: stacosys:latest
    volumes:
      - ~/work/stacosys/config.json:/app/config.json
      - ~/work/dataprod/data/stacosys/db.sqlite:/app/stacosys/db.sqlite
    expose:
      - "8100"
    depends_on:
      - rabbit
  hugo-serve:
    image: hugo-serve:latest
    ports:
      - "80:80"
    volumes:
      - ~/work/blog:/site
    depends_on:
      - stacosys